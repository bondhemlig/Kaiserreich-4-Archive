###########################
# Shared Chinese Events
###########################

add_namespace = china_shared
add_namespace = china_redoubt

country_event = { #Fading legitimacy!
	id = china_shared.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event china_shared.1" }
	title = china_shared.1.t
	desc = china_shared.1.d

	is_triggered_only = yes

	option = {
		name = china_shared.1.a
		add_political_power = -20
	}
}

news_event = { #The Chinese United Front
	id = china_shared.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event china_shared.2" }
	title = china_shared.2.t

	desc = {
		text = china_shared.2.d.pro_JAP
		trigger = {
			is_chinese_tag = yes
			is_working_with_JAP = yes
		}
	}
	desc = {
		text = china_shared.2.d.anti_JAP
		trigger = {
			is_chinese_tag = yes
			is_working_with_JAP = no
		}
	}
	desc = {
		text = china_shared.2.d.JAP
		trigger = {
			tag = JAP
		}
	}
	desc = {
		text = china_shared.2.d.others
		trigger = {
			NOT = { tag = JAP }
			is_chinese_tag = no
		}
	}

	picture = GFX_news_event_china_war

	major = yes
	show_major = {
		NOT = {
			tag = event_target:current_china_leader
		}
	}

	is_triggered_only = yes

	option = {
		name = china_shared.2.a
		trigger = {
			is_chinese_tag = yes
			is_working_with_JAP = yes
		}
	}
	option = {
		name = china_shared.2.b
		trigger = {
			is_chinese_tag = yes
			is_working_with_JAP = no
		}
	}
	option = {
		name = china_shared.2.c
		trigger = {
			tag = JAP
			is_chinese_tag = no
		}
	}
	option = {
		name = china_shared.2.e
		trigger = {
			NOT = { tag = JAP }
			is_chinese_tag = no
		}
	}
}

country_event = { #The Government Flees
	id = china_redoubt.1
	immediate = { log = "[GetDateText]: [Root.GetName]: event china_redoubt.1" }
	title = china_redoubt.1.t
	desc = china_redoubt.1.d

	trigger = {
		has_event_target = china_national_redoubt
		is_in_faction_with = event_target:china_national_redoubt
		event_target:china_national_redoubt = {
			has_capitulated = no
		}
	}

	is_triggered_only = yes

	option = {
		name = china_redoubt.1.a
		event_target:china_national_redoubt = {
			country_event = {
				id = china_redoubt.2
				days = 2
				random = 120
			}
		}
	}

	option = {
		name = china_redoubt.1.b
		trigger = {
			is_ai = no
		}
		event_target:china_national_redoubt = {
			country_event = china_redoubt.2
			change_tag_from = ROOT
		}
	}
}

country_event = { #The Government Reaches Sichuan/Yunnan
	id = china_redoubt.2
	immediate = { log = "[GetDateText]: [Root.GetName]: event china_redoubt.2" }
	title = china_redoubt.2.t
	desc = china_redoubt.2.d

	trigger = {
		is_in_faction_with = event_target:current_china_leader
	}

	is_triggered_only = yes

	option = {
		name = china_redoubt.2.a
		every_other_country = {
			limit = { is_exiled_in = FROM }
			become_exiled_in = {
				target = ROOT
				legitimacy = 100
			}
		}
		FROM = {
			become_exiled_in = {
				target = ROOT
				legitimacy = 100
			}
		}
		central_government_flees_to_redoubt = yes
	}
}

country_event = { #The Government Returns Home
	id = china_redoubt.3
	immediate = { log = "[GetDateText]: [Root.GetName]: event china_redoubt.3" }
	title = china_redoubt.3.t
	desc = china_redoubt.3.d

	is_triggered_only = yes

	option = {
		name = china_redoubt.3.a
		if = {
			limit = { is_government_in_exile = yes }
			end_exile = event_target:current_china_leader
		}
		central_government_returns = yes
	}

	option = {
		name = china_redoubt.3.b
		if = {
			limit = { is_government_in_exile = yes }
			end_exile = event_target:current_china_leader
		}
		central_government_returns = yes
		event_target:current_china_leader = {
			change_tag_from = ROOT
		}
	}
}

country_event = { #Ally Flees to the Redoubt
	id = china_redoubt.4
	immediate = { log = "[GetDateText]: [Root.GetName]: event china_redoubt.4" }
	title = china_redoubt.4.t
	desc = china_redoubt.4.d

	trigger = {
		has_event_target = china_national_redoubt
		is_in_faction_with = event_target:china_national_redoubt
		event_target:china_national_redoubt = {
			has_capitulated = no
		}
	}

	is_triggered_only = yes

	option = {
		name = china_redoubt.4.a
		event_target:china_national_redoubt = {
			country_event = {
				id = china_redoubt.5
				days = 2
				random = 120
			}
		}
	}

	option = {
		name = china_redoubt.4.b
		trigger = {
			is_ai = no
		}
		event_target:china_national_redoubt = {
			country_event = china_redoubt.5
			change_tag_from = ROOT
		}
	}
}

country_event = { #Ally Reaches Sichuan/Yunnan
	id = china_redoubt.5
	immediate = { log = "[GetDateText]: [Root.GetName]: event china_redoubt.5" }
	title = china_redoubt.5.t
	desc = china_redoubt.5.d

	trigger = {
		is_in_faction_with = FROM
	}

	is_triggered_only = yes

	option = {
		name = china_redoubt.5.a
		FROM = {
			become_exiled_in = {
				target = ROOT
				legitimacy = 100
			}
		}
	}
}

country_event = { #Ally Returns Home
	id = china_redoubt.6
	immediate = { log = "[GetDateText]: [Root.GetName]: event china_redoubt.8" }
	title = china_redoubt.6.t
	desc = china_redoubt.6.d

	is_triggered_only = yes

	option = {
		name = china_redoubt.6.a
		if = {
			limit = { is_government_in_exile = yes }
			end_exile = event_target:current_china_leader
		}
	}
}
