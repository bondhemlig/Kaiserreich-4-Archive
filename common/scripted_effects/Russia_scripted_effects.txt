RUS_setup_soviets = {
	hidden_effect = {
		remove_ideas = soviet_worker_soldier
		set_country_flag = Georgiy_K_Zhukov_dead
		set_country_flag = Aleksandr_I_Yegorov_dead
		set_country_flag = Nikolay_F_Vatutin_dead
		set_country_flag = Konstantin_K_Rokossovskiy_dead
		set_country_flag = Vasiliy_I_Chuykov_dead
		set_country_flag = Ivan_Belov_dead
		set_country_flag = Ivan_Konev_dead
		set_country_flag = Pavel_V_Rychagov_dead
		every_unit_leader = {
			limit = {
				OR = {
					has_id = 457 #Zhukov
					has_id = 451 #Shaposhnikov
					has_id = 455 #Chuykov
					has_id = 490 #Rokossovskiy
				}
			}
			set_nationality = SOV
		}
		every_owned_state = {
			limit = {
				OR = {
					state = 195 #Petrograd
					state = 205 #Kaluga
					state = 208 #Luga
					state = 209 #Pskov
					state = 210 #Velikiye Luki
					state = 219 #Moscow
					state = 220 #Kursk
					state = 222 #Orel
					state = 223 #Tula
					state = 224 #Bryansk
					state = 242 #Smolensk
					state = 243 #Roslavl
					state = 244 #Volkhov
					state = 246 #Rzhev
					state = 247 #Tver
					state = 248 #Yaroslavl
					state = 253 #Vladimir
					state = 254 #Ryazan
					state = 258 #Lipetsk
					state = 263 #Novgorod
					state = 264 #Tikhvin
					state = 755 #Toropets
					state = 880 #Dvinsk
				}
			}
			SOV = {
				add_state_core = PREV
				transfer_state = PREV
			}
		}
		for_each_scope_loop = {
			array = RUS.owned_states
			add_claim_by = SOV
		}
		for_each_scope_loop = {
			array = SOV.owned_states
			remove_core_of = RUS
			add_claim_by = RUS
		}
		SOV = {
			transfer_technology = yes
			country_event = {
				id = russia.19440
				days = 1
			}
		}
		country_event = {
			id = russia.1945
			days = 2
		}
		
		# transfer a sizeable amount of equipment
		set_temp_variable = { temp = num_equipment@infantry_equipment }
		multiply_temp_variable = { temp = 0.5 }
		send_equipment = { target = SOV type = infantry_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@artillery_equipment }
		multiply_temp_variable = { temp = 0.5 }
		send_equipment = { target = SOV type = artillery_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@support_equipment }
		multiply_temp_variable = { temp = 0.5 }
		send_equipment = { target = SOV type = support_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@mechanized_equipment }
		multiply_temp_variable = { temp = 0.3 }
		send_equipment = { target = SOV type = mechanized_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@motorized_equipment }
		multiply_temp_variable = { temp = 0.3 }
		send_equipment = { target = SOV type = motorized_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@light_tank_equipment }
		multiply_temp_variable = { temp = 0.3 }
		send_equipment = { target = SOV type = light_tank_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@medium_tank_equipment }
		multiply_temp_variable = { temp = 0.3 }
		send_equipment = { target = SOV type = medium_tank_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@heavy_tank_equipment }
		multiply_temp_variable = { temp = 0.3 }
		send_equipment = { target = SOV type = heavy_tank_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@modern_tank_equipment }
		multiply_temp_variable = { temp = 0.3 }
		send_equipment = { target = SOV type = modern_tank_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@nav_bomber_equipment }
		multiply_temp_variable = { temp = 0.75 }
		send_equipment = { target = SOV type = nav_bomber_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@CAS_equipment }
		multiply_temp_variable = { temp = 0.75 }
		send_equipment = { target = SOV type = CAS_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@fighter_equipment }
		multiply_temp_variable = { temp = 0.75 }
		send_equipment = { target = SOV type = fighter_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@heavy_fighter_equipment }
		multiply_temp_variable = { temp = 0.75 }
		send_equipment = { target = SOV type = heavy_fighter_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@tac_bomber_equipment }
		multiply_temp_variable = { temp = 0.75 }
		send_equipment = { target = SOV type = tac_bomber_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@strat_bomber_equipment }
		multiply_temp_variable = { temp = 0.75 }
		send_equipment = { target = SOV type = strat_bomber_equipment amount = temp }
	
		set_temp_variable = { temp = num_equipment@convoy }
		multiply_temp_variable = { temp = 0.75 }
		send_equipment = { target = SOV type = convoy amount = temp }
	}
}

SOV_add_equal_units = {
	random_owned_state = {
		limit = { is_controlled_by = SOV }
		create_unit = {
			division = "division_template = \"Krasnaya Gvardiya\" start_experience_factor = 0.1"
			owner = SOV
		}
	}

	subtract_from_variable = { var = strength value = 1 }
	if = {
		limit = { check_variable = { strength > 0.99 } }
		SOV_add_equal_units = yes
	}
}
RUS_add_stability = {
	if = {
		limit = {
			has_stability > 0.1
		}
		add_stability = 0.05
	}
	else_if = {
		limit = {
			has_stability > -0.1
		}
		add_stability = 0.1
	}
	else_if = {
		limit = {
			has_stability > -0.3
		}
		add_stability = 0.15
	}
	else_if = {
		limit = {
			has_stability > -0.5
		}
		add_stability = 0.2
	}
	else = {
		add_stability = 0.25
	}
}

RUS_setup_tsar_kirill = {
	if = {
		limit = {
			NOT = { has_country_flag = Kirill_Romanov_dead }
		}
		create_country_leader = {
			name = "Kirill I"
			desc = "POLITICS_KYRIL_ROMANOV_CON_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Kyril_Romanov.tga"
			expire = "1965.1.1"
			ideology = social_democrat_subtype
		}
		create_country_leader = {
			name = "Kirill I"
			desc = "POLITICS_KYRIL_ROMANOV_CON_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Kyril_Romanov.tga"
			expire = "1965.1.1"
			ideology = social_liberal_subtype
		}
		create_country_leader = {
			name = "Kirill I"
			desc = "POLITICS_KYRIL_ROMANOV_CON_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Kyril_Romanov.tga"
			expire = "1965.1.1"
			ideology = market_liberal_subtype
		}
		create_country_leader = {
			name = "Kirill I"
			desc = "POLITICS_KYRIL_ROMANOV_CON_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Kyril_Romanov.tga"
			expire = "1965.1.1"
			ideology = social_conservative_subtype
		}
		create_country_leader = {
			name = "Kirill I"
			desc = "POLITICS_KYRIL_ROMANOV_CON_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Kyril_Romanov.tga"
			expire = "1965.1.1"
			ideology = authoritarian_democrat_subtype
		}
		create_country_leader = {
			name = "Kirill I"
			desc = "POLITICS_KYRIL_ROMANOV_CON_DESC"
			picture = "gfx/leaders/RUS/Portrait_RUS_Kyril_Romanov.tga"
			expire = "1965.1.1"
			ideology = paternal_autocrat_subtype
		}
	}
	else = {
		RUS_setup_tsar_vladimir = yes
	}
}

RUS_setup_tsar_vladimir = {
	create_country_leader = {
		name = "Vladimir III"
		desc = "POLITICS_VLADIMIR_ROMANOV_CON_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Vladimir_Romanov.tga"
		expire = "1965.1.1"
		ideology = social_democrat_subtype
	}
	create_country_leader = {
		name = "Vladimir III"
		desc = "POLITICS_VLADIMIR_ROMANOV_CON_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Vladimir_Romanov.tga"
		expire = "1965.1.1"
		ideology = social_liberal_subtype
	}
	create_country_leader = {
		name = "Vladimir III"
		desc = "POLITICS_VLADIMIR_ROMANOV_CON_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Vladimir_Romanov.tga"
		expire = "1965.1.1"
		ideology = market_liberal_subtype
	}
	create_country_leader = {
		name = "Vladimir III"
		desc = "POLITICS_VLADIMIR_ROMANOV_CON_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Vladimir_Romanov.tga"
		expire = "1965.1.1"
		ideology = social_conservative_subtype
	}
	create_country_leader = {
		name = "Vladimir III"
		desc = "POLITICS_VLADIMIR_ROMANOV_CON_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Vladimir_Romanov.tga"
		expire = "1965.1.1"
		ideology = authoritarian_democrat_subtype
	}
	create_country_leader = {
		name = "Vladimir III"
		desc = "POLITICS_VLADIMIR_ROMANOV_CON_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Vladimir_Romanov.tga"
		expire = "1965.1.1"
		ideology = paternal_autocrat_subtype
	}
}

RUS_setup_tsar_dmitriy = {
	create_country_leader = {
		name = "Dmitriy III"
		desc = "POLITICS_DMITRI_ROMANOV_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Dmitri_Romanov_Tsar.tga"
		expire = "1965.1.1"
		ideology = social_democrat_subtype
	}
	create_country_leader = {
		name = "Dmitriy III"
		desc = "POLITICS_DMITRI_ROMANOV_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Dmitri_Romanov_Tsar.tga"
		expire = "1965.1.1"
		ideology = social_liberal_subtype
	}
	create_country_leader = {
		name = "Dmitriy III"
		desc = "POLITICS_DMITRI_ROMANOV_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Dmitri_Romanov_Tsar.tga"
		expire = "1965.1.1"
		ideology = market_liberal_subtype
	}
	create_country_leader = {
		name = "Dmitriy III"
		desc = "POLITICS_DMITRI_ROMANOV_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Dmitri_Romanov_Tsar.tga"
		expire = "1965.1.1"
		ideology = social_conservative_subtype
	}
	create_country_leader = {
		name = "Dmitriy III"
		desc = "POLITICS_DMITRI_ROMANOV_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Dmitri_Romanov_Tsar.tga"
		expire = "1965.1.1"
		ideology = authoritarian_democrat_subtype
	}
	create_country_leader = {
		name = "Dmitriy III"
		desc = "POLITICS_DMITRI_ROMANOV_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Dmitri_Romanov_Tsar.tga"
		expire = "1965.1.1"
		ideology = paternal_autocrat_subtype
	}
}

RUS_setup_tsar_pavel = {
	create_country_leader = {
		name = "Pavel II"
		desc = "POLITICS_PAVEL_II_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pavel_Romanov.tga"
		expire = "1965.1.1"
		ideology = social_democrat_subtype
	}
	create_country_leader = {
		name = "Pavel II"
		desc = "POLITICS_PAVEL_II_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pavel_Romanov.tga"
		expire = "1965.1.1"
		ideology = social_liberal_subtype
	}
	create_country_leader = {
		name = "Pavel II"
		desc = "POLITICS_PAVEL_II_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pavel_Romanov.tga"
		expire = "1965.1.1"
		ideology = market_liberal_subtype
	}
	create_country_leader = {
		name = "Pavel II"
		desc = "POLITICS_PAVEL_II_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pavel_Romanov.tga"
		expire = "1965.1.1"
		ideology = social_conservative_subtype
	}
	create_country_leader = {
		name = "Pavel II"
		desc = "POLITICS_PAVEL_II_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pavel_Romanov.tga"
		expire = "1965.1.1"
		ideology = authoritarian_democrat_subtype
	}
	create_country_leader = {
		name = "Pavel II"
		desc = "POLITICS_PAVEL_II_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pavel_Romanov.tga"
		expire = "1965.1.1"
		ideology = paternal_autocrat_subtype
	}
}

RUS_setup_tsar_wrangel = {
	create_country_leader = {
		name = "Pyetr IV"
		desc = "POLITICS_PYOTR_WRANGEL_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pyotr_Wrangel_Tsar.tga"
		expire = "1965.1.1"
		ideology = social_democrat_subtype
	}
	create_country_leader = {
		name = "Pyetr IV"
		desc = "POLITICS_PYOTR_WRANGEL_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pyotr_Wrangel_Tsar.tga"
		expire = "1965.1.1"
		ideology = social_liberal_subtype
	}
	create_country_leader = {
		name = "Pyetr IV"
		desc = "POLITICS_PYOTR_WRANGEL_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pyotr_Wrangel_Tsar.tga"
		expire = "1965.1.1"
		ideology = market_liberal_subtype
	}
	create_country_leader = {
		name = "Pyetr IV"
		desc = "POLITICS_PYOTR_WRANGEL_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pyotr_Wrangel_Tsar.tga"
		expire = "1965.1.1"
		ideology = social_conservative_subtype
	}
	create_country_leader = {
		name = "Pyetr IV"
		desc = "POLITICS_PYOTR_WRANGEL_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pyotr_Wrangel_Tsar.tga"
		expire = "1965.1.1"
		ideology = authoritarian_democrat_subtype
	}
	create_country_leader = {
		name = "Pyetr IV"
		desc = "POLITICS_PYOTR_WRANGEL_TSAR_DESC"
		picture = "gfx/leaders/RUS/Portrait_RUS_Pyotr_Wrangel_Tsar.tga"
		expire = "1965.1.1"
		ideology = paternal_autocrat_subtype
	}
}

RUS_unlock_political_path = {
	remove_ideas = rus_political_instability
	complete_national_focus = RUS_Political_Stabilisation
}

RUS_set_zemstvo_flag = {
	hidden_effect = {
		random_list = {
			15 = { set_country_flag = RUS_zemstvo_hospital }
			15 = { set_country_flag = RUS_zemstvo_infrastructure }
			17 = { set_country_flag = RUS_zemstvo_production }
			17 = { set_country_flag = RUS_zemstvo_mismanagement }
			17 = { set_country_flag = RUS_zemstvo_embezzlement }
			6 = { set_country_flag = RUS_zemstvo_factory }
			6 = { set_country_flag = RUS_zemstvo_arms_factory }
			5 = { set_country_flag = RUS_zemstvo_factory_and_infra }
			3 = { set_country_flag = RUS_zemstvo_two_factories }
		}
	}
}

RUS_reduce_black_monday = {
	if = {
		limit = { has_idea = RUS_economic_depression_1 }
		hidden_effect = {
			country_event = {
				id = rusd.121
				days = 10
				random = 480
			}
		}
	}
	else_if = {
		limit = { has_idea = RUS_economic_depression_2 }
		swap_ideas = {
			remove_idea = RUS_economic_depression_2
			add_idea = RUS_economic_depression_3
		}
	}
	else_if = {
		limit = { has_idea = RUS_economic_depression_3 }
		swap_ideas = {
			remove_idea = RUS_economic_depression_3
			add_idea = RUS_economic_depression_4
		}
	}
	else_if = {
		limit = { has_idea = RUS_economic_depression_4 }
		swap_ideas = {
			remove_idea = RUS_economic_depression_4
			add_idea = RUS_economic_depression_5
		}
	}
	else_if = {
		limit = { has_idea = RUS_economic_depression_5 }
		remove_ideas = RUS_economic_depression_5
	}
}
