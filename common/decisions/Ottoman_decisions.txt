###########################
# Ottoman Decisions
###########################
# By Jeankedezeehond
###########################

political_actions = {

	OTT_demand_western_thrace = {
		icon = generic_flags

		allowed = { tag = OTT }

		available = {
			controls_all_owned_states = yes
		}

		visible = {
			has_global_flag = balkan_war_started
			NOT = { has_global_flag = balkan_war_ended }
			owns_state = 341 #Adrianople
			can_declare_war_on = FROM
			FROM = {
				has_war_with = SER
				OR = {
					owns_state = 184 #Western Thrace
					owns_state = 1089 #Momchilgrad
				}
			}
		}

		targets = { BUL }

		target_trigger = {
			can_declare_war_on = FROM
			FROM = {
				has_war_with = SER
				OR = {
					owns_state = 184 #Western Thrace
					owns_state = 1089 #Momchilgrad
				}
			}
		}

		fire_only_once = yes
		cost = 0
		days_remove = 14

		war_with_on_remove = BUL

		complete_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision OTT_demand_western_thrace target: [From.GetName]"
			add_war_support = 0.05
			hidden_effect = {
				FROM = { country_event = pact.25 }
			}
		}
		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove OTT_demand_western_thrace target: [From.GetName]"
			if = {
				limit = {
					can_declare_war_on = FROM
					FROM = {
						has_war_with = SER
						OR = {
							owns_state = 184 #Western Thrace
							owns_state = 1089 #Momchilgrad
						}
					}
				}
				country_event = pact.21
			}
		}

		ai_will_do = {
			factor = 100
			modifier = {
				factor = 0
				has_war = yes
				NOT = {
					OR = {
						has_game_rule = {
							rule = BUL_fourth_balkan_war
							option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_OTT
						}
						has_game_rule = {
							rule = BUL_fourth_balkan_war
							option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_OTT
						}
						has_game_rule = {
							rule = BUL_fourth_balkan_war
							option = BUL_FOURTH_BALKAN_WAR_BUL_VS_PACT_SUBMIT_TO_OTT
						}
						has_game_rule = {
							rule = BUL_fourth_balkan_war
							option = BUL_FOURTH_BALKAN_WAR_BUL_ALB_VS_PACT_SUBMIT_TO_OTT
						}
					}
				}
			}
		}
	}
}

OTT_OPDA_decisions = {
	OTT_German_OPDA_mission = {
		icon = ger_mefo_bills

		allowed = { always = no } #manually activated

		available = { date > 1954.5.24 }

		selectable_mission = yes
		days_mission_timeout = 6720
		is_good = yes
		fire_only_once = yes

		cancel_trigger = {
			OR = {
				has_country_flag = OTT_GER_PAID
				has_war_with = GER
				NOT = { country_exists = GER }
				GER = { is_subject = yes }
				hidden_trigger = {
					NOT = {
						has_idea = ott_opda_idea
						has_idea = ott_opda_idea_1
						has_idea = ott_opda_idea_3
					}
				}
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout OTT_German_OPDA_mission"
			country_event = ott.142
			remove_ideas = ott_opda_idea
			hidden_effect = {
				remove_ideas = ott_opda_idea_1
				remove_ideas = ott_opda_idea_2
				remove_ideas = ott_opda_idea_3
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	OTT_Austrian_OPDA_mission = {
		icon = ger_mefo_bills

		allowed = { always = no } #manually activated

		available = { date > 1954.5.24 }

		selectable_mission = yes
		days_mission_timeout = 6720
		is_good = yes
		fire_only_once = yes

		cancel_trigger = {
			OR = {
				has_country_flag = OTT_AUS_PAID
				has_war_with = AUS
				NOT = { country_exists = AUS }
				AUS = { is_subject = yes }
				hidden_trigger = {
					NOT = {
						has_idea = ott_opda_idea
						has_idea = ott_opda_idea_1
						has_idea = ott_opda_idea_2
					}
				}
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout OTT_Austrian_OPDA_mission"
			country_event = ott.142
			remove_ideas = ott_opda_idea
			hidden_effect = {
				remove_ideas = ott_opda_idea_1
				remove_ideas = ott_opda_idea_2
				remove_ideas = ott_opda_idea_3
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	OTT_Entente_OPDA_mission = {
		icon = ger_mefo_bills

		allowed = { always = no } #manually activated

		available = { date > 1954.5.24 }

		selectable_mission = yes
		days_mission_timeout = 6720
		is_good = yes
		fire_only_once = yes

		cancel_trigger = {
			OR = {
				has_country_flag = OTT_ENT_PAID
				has_war_with = ENT
				NOT = { country_exists = ENT }
				ENT = { is_subject = yes }
				hidden_trigger = {
					NOT = {
						has_idea = ott_opda_idea
						has_idea = ott_opda_idea_1
						has_idea = ott_opda_idea_2
					}
				}
			}
		}

		timeout_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision timeout OTT_Entente_OPDA_mission"
			country_event = ott.142
			remove_ideas = ott_opda_idea
			hidden_effect = {
				remove_ideas = ott_opda_idea_1
				remove_ideas = ott_opda_idea_2
				remove_ideas = ott_opda_idea_3
			}
		}

		ai_will_do = {
			factor = 200
		}
	}

	OTT_opda_austria = {
		icon = generic_decision

		allowed = {
			original_tag = OTT
		}

		available = {
			has_completed_focus = OTT_opda
			OR = {
				NOT = { country_exists = GER }
				date > 1940.1.1
				AUS = {
					OR = {
						has_war_with = HUN
						AND = {
							has_war_with = SER
							has_war_with = ROM
						}
						any_enemy_country = { is_actual_major = yes }
					}
				}
				43 = { owned_by_austria_or_puppet = no }
			}
		}
		
		visible = { has_active_mission = OTT_Austrian_OPDA_mission }

		cost = 0
		days_remove = 30
		fire_only_once = yes
		cancel_if_not_visible = yes

		modifier = {
			political_power_gain = -0.1
		}

		ai_will_do = {
			factor = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove OTT_opda_austria"
			reverse_add_opinion_modifier = {
				target = AUS
				modifier = ott_r_opda
			}
			custom_effect_tooltip = OTT_creditors_tt
			country_event = {
				id = ott.154 days = 1
			}
		}
	}

	OTT_opda_germany = {
		icon = generic_decision

		allowed = {
			original_tag = OTT
		}

		available = {
			has_completed_focus = OTT_opda
			OR = {
				date > 1942.1.1
				GER = {
					any_enemy_country = { is_actual_major = yes }
				}
			}
		}
		
		visible = { has_active_mission = OTT_German_OPDA_mission }

		cost = 0
		days_remove = 30
		fire_only_once = yes
		cancel_if_not_visible = yes

		modifier = {
			political_power_gain = -0.1
		}

		ai_will_do = {
			factor = 100
		}

		remove_effect = {
			log = "[GetDateText]: [Root.GetName]: Decision remove OTT_opda_germany"
			reverse_add_opinion_modifier = {
				target = GER
				modifier = ott_r_opda
			}
			custom_effect_tooltip = OTT_creditors_tt
			country_event = {
				id = ott.145 days = 1
			}
		}
	}
}
