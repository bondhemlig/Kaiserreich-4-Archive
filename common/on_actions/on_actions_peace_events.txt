on_actions = {
	#ROOT is new controller #FROM is old controller #FROM.FROM is state ID
	on_state_control_changed = {
		effect = {
			if = {
				limit = {
					FROM = { tag = LEP }
					surrender_progress > 0.95
				}
				country_event = leppeace.1
			}
			if = {
				limit = {
					FROM = {
						tag = TIB
						has_war_with = SZC
					}
				}
				FROM = { country_event = sichuan.12 }
			}
			if = {
				limit = {
					owns_state = 858
				}
				country_event = chi_for.45
			}
			if = {
				limit = {
					OR = {
						ROOT = { tag = UKR }
						FROM = { tag = ROM }
					}
					OR = {
						ROOT = { tag = ROM }
						FROM = { tag = UKR }
					}
				}
				country_event = { id = romania.55 hours = 6 }
				country_event = { id = romania.56 hours = 6 }
			}
		}
	}

	# ROOT is capitulated country, FROM is winner
	on_capitulation = {
		effect = {
			log = "[GetDateText] [Root.GetName] has capitulated to [From.GetName]"
			### German East Asia peace
			if = {
				limit = {
					OR = {
						is_in_faction_with = GER
						is_subject_of = GER
					}
					is_in_asia = yes
				}
				GER = {
					country_event = { id = asiapeace.1 days = 20 }
				}
			}
			
			### Dutch East Indies peace
			if = {
				limit = {
					OR = {
						is_in_faction_with = HOL
						is_subject_of = HOL
					}
					is_in_asia = yes
				}
				HOL = {
					country_event = { id = asiapeace.4 days = 20 }
				}
			}
			if = {
				limit = {
					tag = INS
					has_war_with = DEI
				}
				DEI = {
					annex_country = {
						target = INS
						transfer_troops = no
					}
				}
			}
			
			#Russian-Bulgarian alliance
			if = {
				limit = {
					tag = BUL
					is_in_faction_with = RUS
					NOT = {
						any_of_scopes = {
							array = RUS.faction_members
							is_subject = no
						}
					}
				}
				RUS = {
					country_event = { id = bulgaria.99 months = 2 }
				}
			}
		}
	}
}
